<div >
  <div class="section-content section-content-p30 py-4">
    <div class="container grid-container">  <!-- ✅ thêm grid-container -->

      <!-- ✅ bỏ g-3, dùng biến CSS để set gutter đồng nhất -->
      <div class="row grid row-cols-2 row-cols-sm-3 row-cols-md-4 row-cols-xl-5">

        <!-- loop -->
        <div class="col" *ngFor="let p of products">
          <div class="card h-100 product-card shadow-sm position-relative">
            <a [routerLink]="['/products', p.id]" class="product-image-link">
              <img [src]="p.imageUrl" [alt]="p.name" class="card-img-top">
            </a>

            <div class="card-body d-flex flex-column">
              <h6 class="card-title mb-2 text-truncate-2">
                <a [routerLink]="['/products', p.id]" class=" text-decoration-none text-body">
                  {{ p.name }}
                </a>
              </h6>

              <div class="mt-auto d-flex justify-content-between align-items-center">
                <span class="price text-success fw-semibold">
                  {{ p.unitPrice | currency:'USD' }}
                </span>
              </div>

              <button (click)="addToCart(p)" class="btn btn-primary btn-sm ">Add to cart</button>
            </div>
          </div>
        </div>

        <!-- empty -->
        <div *ngIf="products?.length === 0" class="col-12">
          <div class="alert alert-warning text-center" role="alert">
            No products found.
          </div>
        </div>
      </div>

      <!-- footer pagination -->
      <div class="footer-pagination">
        <div class="d-flex flex-wrap justify-content-end align-items-center gap-2">
          <label class="mb-0 small">Page Size</label>

          <!-- nhớ đã import FormsModule vào component -->
          <select class="form-select form-select-sm w-auto"
                  [(ngModel)]="thePageSize"
                  (ngModelChange)="thePageNumber=1; listProducts()">
            <option [value]="2">2</option>
            <option [value]="5">5</option>
            <option [value]="10">10</option>
            <option [value]="20">20</option>
            <option [value]="50">50</option>
          </select>

          <ngb-pagination class="mb-0"
            [(page)]="thePageNumber"
            [pageSize]="thePageSize"
            [collectionSize]="theTotalElements"
            [maxSize]="5"
            [boundaryLinks]="true"
            (pageChange)="listProducts()">
          </ngb-pagination>
        </div>
      </div>

    </div>
  </div>
</div>
